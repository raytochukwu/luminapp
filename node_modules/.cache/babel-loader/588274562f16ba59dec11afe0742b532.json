{"ast":null,"code":"import _objectSpread from\"C:/Users/RAY/Desktop/luminapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import\"./Cart.css\";import Modal from\"./Modal\";import{useAppContext}from\"../AppContext\";import{getCurrency}from\"./Queries/ProdQ\";import{useQuery}from\"@apollo/client\";import cx from\"classnames\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Cart(){var _useAppContext=useAppContext(),currency=_useAppContext.currency,cart=_useAppContext.cart,updateCart=_useAppContext.updateCart,cartState=_useAppContext.cartState,updateCurrency=_useAppContext.updateCurrency,toggleCart=_useAppContext.toggleCart,products=_useAppContext.products;var _useQuery=useQuery(getCurrency),data=_useQuery.data;var handleChange=function handleChange(event){var _event$target;updateCurrency((_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.value);};function removeItem(id){var newCart=cart.filter(function(car){return car.id!==id;});updateCart(newCart);}function increaseQuantity(id){var newCart=cart.map(function(car){return car.id===id?_objectSpread(_objectSpread({},car),{},{quantity:car.quantity+1}):car;});updateCart(newCart);}function decreaseQuantity(id){var newCart=cart.map(function(car){return car.id===id?_objectSpread(_objectSpread({},car),{},{quantity:car.quantity>1?car.quantity-1:1}):car;});updateCart(newCart);}function formatCart(){var newCart=cart.map(function(car){var product=products.find(function(product){return product.id===car.id;});return(product===null||product===void 0?void 0:product.price)?_objectSpread(_objectSpread({},car),{},{price:product.price}):car;});return newCart;}var finalCart=formatCart();function calculateTotal(){var total=0;finalCart.forEach(function(item){return total+=item.quantity*item.price;});return total;}return/*#__PURE__*/_jsx(Modal,{show:cartState,closeModal:function closeModal(){return toggleCart(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upper-div\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"modal-title\",children:\"Your cart\"}),/*#__PURE__*/_jsx(\"div\",{className:\"my-4\",children:/*#__PURE__*/_jsx(\"select\",{name:\"currency\",className:\"form-select\",onChange:handleChange,value:currency,children:(data===null||data===void 0?void 0:data.currency)&&(data===null||data===void 0?void 0:data.currency.map(function(car,index){return/*#__PURE__*/_jsx(\"option\",{value:car,children:car},index);}))})}),finalCart&&finalCart.length===0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"There are no items in your cart.\"})}),finalCart&&finalCart.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"card-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close-btn\",onClick:function onClick(){return removeItem(item.id);},children:\"X\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column justify-content-between h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:item.title}),/*#__PURE__*/_jsx(\"h5\",{className:\"personalizations\",children:(item===null||item===void 0?void 0:item.options)&&item.options.map(function(option,index){return/*#__PURE__*/_jsxs(\"span\",{children:[option.value,\" | \"]},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-price\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quantity-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return decreaseQuantity(item.id);},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return increaseQuantity(item.id);},children:\"+\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"price-wrapper d-flex align-items-center\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"price\",children:[currency,item.price*item.quantity,\".00\"]})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image_url,alt:item.title})})]})]},item.id);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lower-div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total\",children:[currency,calculateTotal(),\".00\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:cx(\"btn outline\",{disabled:!(finalCart===null||finalCart===void 0?void 0:finalCart.length)}),children:\"Make this a subscription (Save 20%)\"}),/*#__PURE__*/_jsx(\"button\",{className:cx(\"btn solid\",{disabled:!(finalCart===null||finalCart===void 0?void 0:finalCart.length)}),children:\"proceed to checkout\"})]})]})});}export default Cart;","map":{"version":3,"sources":["C:/Users/RAY/Desktop/luminapp/src/components/Cart.js"],"names":["React","Modal","useAppContext","getCurrency","useQuery","cx","Cart","currency","cart","updateCart","cartState","updateCurrency","toggleCart","products","data","handleChange","event","target","value","removeItem","id","newCart","filter","car","increaseQuantity","map","quantity","decreaseQuantity","formatCart","product","find","price","finalCart","calculateTotal","total","forEach","item","index","length","title","options","option","image_url","disabled"],"mappings":"mJAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,OAASC,aAAT,KAA8B,eAA9B,CACA,OAASC,WAAT,KAA4B,iBAA5B,CACA,OAASC,QAAT,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,C,wFAGA,MAAO,SAASC,CAAAA,IAAT,EAAgB,CACrB,mBAQIJ,aAAa,EARjB,CACEK,QADF,gBACEA,QADF,CAEEC,IAFF,gBAEEA,IAFF,CAGEC,UAHF,gBAGEA,UAHF,CAIEC,SAJF,gBAIEA,SAJF,CAKEC,cALF,gBAKEA,cALF,CAMEC,UANF,gBAMEA,UANF,CAOEC,QAPF,gBAOEA,QAPF,CASA,cAAiBT,QAAQ,CAACD,WAAD,CAAzB,CAAQW,IAAR,WAAQA,IAAR,CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,mBAC9BL,cAAc,gBAACK,KAAK,CAACC,MAAP,wCAAC,cAAcC,KAAf,CAAd,CACD,CAFD,CAIA,QAASC,CAAAA,UAAT,CAAoBC,EAApB,CAAwB,CACtB,GAAMC,CAAAA,OAAO,CAAGb,IAAI,CAACc,MAAL,CAAY,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACH,EAAJ,GAAWA,EAApB,EAAZ,CAAhB,CACAX,UAAU,CAACY,OAAD,CAAV,CACD,CAED,QAASG,CAAAA,gBAAT,CAA0BJ,EAA1B,CAA8B,CAC5B,GAAMC,CAAAA,OAAO,CAAGb,IAAI,CAACiB,GAAL,CAAS,SAACF,GAAD,QACvBA,CAAAA,GAAG,CAACH,EAAJ,GAAWA,EAAX,gCAAqBG,GAArB,MAA0BG,QAAQ,CAAEH,GAAG,CAACG,QAAJ,CAAe,CAAnD,GAAyDH,GADlC,EAAT,CAAhB,CAGAd,UAAU,CAACY,OAAD,CAAV,CACD,CAED,QAASM,CAAAA,gBAAT,CAA0BP,EAA1B,CAA8B,CAC5B,GAAMC,CAAAA,OAAO,CAAGb,IAAI,CAACiB,GAAL,CAAS,SAACF,GAAD,QACvBA,CAAAA,GAAG,CAACH,EAAJ,GAAWA,EAAX,gCAAqBG,GAArB,MAA0BG,QAAQ,CAAEH,GAAG,CAACG,QAAJ,CAAe,CAAf,CAAmBH,GAAG,CAACG,QAAJ,CAAe,CAAlC,CAAsC,CAA1E,GAAgFH,GADzD,EAAT,CAAhB,CAGAd,UAAU,CAACY,OAAD,CAAV,CACD,CAED,QAASO,CAAAA,UAAT,EAAsB,CACpB,GAAMP,CAAAA,OAAO,CAAGb,IAAI,CAACiB,GAAL,CAAS,SAACF,GAAD,CAAS,CAChC,GAAMM,CAAAA,OAAO,CAAGhB,QAAQ,CAACiB,IAAT,CAAc,SAACD,OAAD,QAAaA,CAAAA,OAAO,CAACT,EAAR,GAAeG,GAAG,CAACH,EAAhC,EAAd,CAAhB,CACA,MAAO,CAAAS,OAAO,OAAP,EAAAA,OAAO,SAAP,QAAAA,OAAO,CAAEE,KAAT,iCAAsBR,GAAtB,MAA2BQ,KAAK,CAAEF,OAAO,CAACE,KAA1C,GAAoDR,GAA3D,CACD,CAHe,CAAhB,CAIA,MAAOF,CAAAA,OAAP,CACD,CAED,GAAMW,CAAAA,SAAS,CAAGJ,UAAU,EAA5B,CAEA,QAASK,CAAAA,cAAT,EAA0B,CACxB,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACAF,SAAS,CAACG,OAAV,CAAkB,SAACC,IAAD,QAAWF,CAAAA,KAAK,EAAIE,IAAI,CAACV,QAAL,CAAgBU,IAAI,CAACL,KAAzC,EAAlB,EACA,MAAOG,CAAAA,KAAP,CACD,CACD,mBACE,KAAC,KAAD,EAAO,IAAI,CAAExB,SAAb,CAAwB,UAAU,CAAE,4BAAME,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAApC,uBACE,aAAK,SAAS,CAAC,cAAf,wBACE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,aAAd,uBADF,cAEE,YAAK,SAAS,CAAC,MAAf,uBACE,eACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,aAFZ,CAGE,QAAQ,CAAEG,YAHZ,CAIE,KAAK,CAAER,QAJT,UAMG,CAAAO,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEP,QAAN,IACCO,IADD,SACCA,IADD,iBACCA,IAAI,CAAEP,QAAN,CAAekB,GAAf,CAAmB,SAACF,GAAD,CAAMc,KAAN,qBACjB,eAAQ,KAAK,CAAEd,GAAf,UACGA,GADH,EAAyBc,KAAzB,CADiB,EAAnB,CADD,CANH,EADF,EAFF,CAiBGL,SAAS,EAAIA,SAAS,CAACM,MAAV,GAAqB,CAAlC,eACC,kCACE,UAAG,SAAS,CAAC,aAAb,8CADF,EAlBJ,CAsBGN,SAAS,EACRA,SAAS,CAACP,GAAV,CAAc,SAACW,IAAD,qBACZ,aAAmB,SAAS,CAAC,WAA7B,wBACE,aAAM,SAAS,CAAC,WAAhB,CAA4B,OAAO,CAAE,yBAAMjB,CAAAA,UAAU,CAACiB,IAAI,CAAChB,EAAN,CAAhB,EAArC,eADF,cAIE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,kDAAf,wBACE,oCACE,WAAI,SAAS,CAAC,OAAd,UAAuBgB,IAAI,CAACG,KAA5B,EADF,cAEE,WAAI,SAAS,CAAC,kBAAd,UACG,CAAAH,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEI,OAAN,GACCJ,IAAI,CAACI,OAAL,CAAaf,GAAb,CAAiB,SAACgB,MAAD,CAASJ,KAAT,qBACf,wBAAmBI,MAAM,CAACvB,KAA1B,SAAWmB,KAAX,CADe,EAAjB,CAFJ,EAFF,GADF,cAUE,aAAK,SAAS,CAAC,gBAAf,wBACE,YAAK,SAAS,CAAC,kBAAf,uBACE,aAAK,SAAS,CAAC,UAAf,wBACE,aAAM,OAAO,CAAE,yBAAMV,CAAAA,gBAAgB,CAACS,IAAI,CAAChB,EAAN,CAAtB,EAAf,eADF,cAIE,sBAAOgB,IAAI,CAACV,QAAZ,EAJF,cAKE,aAAM,OAAO,CAAE,yBAAMF,CAAAA,gBAAgB,CAACY,IAAI,CAAChB,EAAN,CAAtB,EAAf,eALF,GADF,EADF,cAYE,YAAK,SAAS,CAAC,yCAAf,uBACE,YAAI,SAAS,CAAC,OAAd,WACGb,QADH,CAEG6B,IAAI,CAACL,KAAL,CAAaK,IAAI,CAACV,QAFrB,SADF,EAZF,GAVF,GADF,EADF,cAiCE,YAAK,SAAS,CAAC,OAAf,uBACE,YAAK,GAAG,CAAEU,IAAI,CAACM,SAAf,CAA0B,GAAG,CAAEN,IAAI,CAACG,KAApC,EADF,EAjCF,GAJF,GAAUH,IAAI,CAAChB,EAAf,CADY,EAAd,CAvBJ,GADF,cAqEE,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,qCAAf,wBACE,aAAM,SAAS,CAAC,OAAhB,sBADF,cAEE,cAAM,SAAS,CAAC,OAAhB,WACGb,QADH,CAEG0B,cAAc,EAFjB,SAFF,GADF,cAQE,eAAQ,SAAS,CAAE5B,EAAE,CAAC,aAAD,CAAgB,CAAEsC,QAAQ,CAAE,EAACX,SAAD,SAACA,SAAD,iBAACA,SAAS,CAAEM,MAAZ,CAAZ,CAAhB,CAArB,iDARF,cAWE,eAAQ,SAAS,CAAEjC,EAAE,CAAC,WAAD,CAAc,CAAEsC,QAAQ,CAAE,EAACX,SAAD,SAACA,SAAD,iBAACA,SAAS,CAAEM,MAAZ,CAAZ,CAAd,CAArB,iCAXF,GArEF,GADF,EADF,CAuFD,CAED,cAAehC,CAAAA,IAAf","sourcesContent":["import React from \"react\";\r\nimport \"./Cart.css\";\r\nimport Modal from \"./Modal\";\r\nimport { useAppContext } from \"../AppContext\";\r\nimport { getCurrency } from \"./Queries/ProdQ\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport cx from \"classnames\";\r\n\r\n\r\nexport function Cart() {\r\n  const {\r\n    currency,\r\n    cart,\r\n    updateCart,\r\n    cartState,\r\n    updateCurrency,\r\n    toggleCart,\r\n    products,\r\n  } = useAppContext();\r\n  const { data } = useQuery(getCurrency);\r\n  const handleChange = (event) => {\r\n    updateCurrency(event.target?.value);\r\n  };\r\n\r\n  function removeItem(id) {\r\n    const newCart = cart.filter((car) => car.id !== id);\r\n    updateCart(newCart);\r\n  }\r\n\r\n  function increaseQuantity(id) {\r\n    const newCart = cart.map((car) =>\r\n      car.id === id ? { ...car, quantity: car.quantity + 1 } : car\r\n    );\r\n    updateCart(newCart);\r\n  }\r\n\r\n  function decreaseQuantity(id) {\r\n    const newCart = cart.map((car) =>\r\n      car.id === id ? { ...car, quantity: car.quantity > 1 ? car.quantity - 1 : 1 } : car\r\n    );\r\n    updateCart(newCart);\r\n  }\r\n\r\n  function formatCart() {\r\n    const newCart = cart.map((car) => {\r\n      const product = products.find((product) => product.id === car.id);\r\n      return product?.price ? { ...car, price: product.price } : car;\r\n    });\r\n    return newCart;\r\n  }\r\n\r\n  const finalCart = formatCart();\r\n\r\n  function calculateTotal() {\r\n    let total = 0;\r\n    finalCart.forEach((item) => (total += item.quantity * item.price));\r\n    return total;\r\n  }\r\n  return (\r\n    <Modal show={cartState} closeModal={() => toggleCart(false)}>\r\n      <div className=\"cart-wrapper\">\r\n        <div className=\"upper-div\">\r\n          <h6 className=\"modal-title\">Your cart</h6>\r\n          <div className=\"my-4\">\r\n            <select\r\n              name=\"currency\"\r\n              className=\"form-select\"\r\n              onChange={handleChange}\r\n              value={currency}\r\n            >\r\n              {data?.currency &&\r\n                data?.currency.map((car, index) => (\r\n                  <option value={car} key={index}>\r\n                    {car}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n          {finalCart && finalCart.length === 0 && (\r\n            <div>\r\n              <p className=\"text-center\">There are no items in your cart.</p>\r\n            </div>\r\n          )}\r\n          {finalCart &&\r\n            finalCart.map((item) => (\r\n              <div key={item.id} className=\"card-item\">\r\n                <span className=\"close-btn\" onClick={() => removeItem(item.id)}>\r\n                  X\r\n                </span>\r\n                <div className=\"row\">\r\n                  <div className=\"col-8\">\r\n                    <div className=\"d-flex flex-column justify-content-between h-100\">\r\n                      <div>\r\n                        <h4 className=\"title\">{item.title}</h4>\r\n                        <h5 className=\"personalizations\">\r\n                          {item?.options &&\r\n                            item.options.map((option, index) => (\r\n                              <span key={index}>{option.value} | </span>\r\n                            ))}\r\n                        </h5>\r\n                      </div>\r\n                      <div className=\"quantity-price\">\r\n                        <div className=\"quantity-wrapper\">\r\n                          <div className=\"quantity\">\r\n                            <span onClick={() => decreaseQuantity(item.id)}>\r\n                              -\r\n                            </span>\r\n                            <span>{item.quantity}</span>\r\n                            <span onClick={() => increaseQuantity(item.id)}>\r\n                              +\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"price-wrapper d-flex align-items-center\">\r\n                          <h6 className=\"price\">\r\n                            {currency}\r\n                            {item.price * item.quantity}.00\r\n                          </h6>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-4\">\r\n                    <img src={item.image_url} alt={item.title} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n        <div className=\"lower-div\">\r\n          <div className=\"d-flex justify-content-between mb-5\">\r\n            <span className=\"total\">Subtotal</span>\r\n            <span className=\"total\">\r\n              {currency}\r\n              {calculateTotal()}.00\r\n            </span>\r\n          </div>\r\n          <button className={cx(\"btn outline\", { disabled: !finalCart?.length })}>\r\n            Make this a subscription (Save 20%)\r\n          </button>\r\n          <button className={cx(\"btn solid\", { disabled: !finalCart?.length })}>proceed to checkout</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}