{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RAY\\\\Desktop\\\\luminapp\\\\src\\\\components\\\\Productionpg.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Product.css';\nimport { getProduct } from './Queries/ProdQ';\nimport { useQuery, gql } from \"@apollo/client\";\nimport Modal from './Modal.js';\nimport { useState, useEffect } from 'react';\nimport { useAppContext } from '../AppContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst getDefaultPersonalization = cartItem => {\n  var _cartItem$product_opt;\n\n  const defaultState = cartItem === null || cartItem === void 0 ? void 0 : (_cartItem$product_opt = cartItem.product_options) === null || _cartItem$product_opt === void 0 ? void 0 : _cartItem$product_opt.map(item => {\n    var _item$options;\n\n    return {\n      name: item.title,\n      value: ((_item$options = item.options) === null || _item$options === void 0 ? void 0 : _item$options.length) && item.options[0].value\n    };\n  });\n  return defaultState;\n};\n\nexport const Productionpg = () => {\n  _s();\n\n  const {\n    currency,\n    cart,\n    updateCart,\n    toggleCart,\n    updateProducts\n  } = useAppContext();\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(getProduct, {\n    variables: {\n      currency\n    }\n  });\n  const [showModal, toggleModal] = useState(false);\n  const [cartItem, setCartItem] = useState(null);\n  const [personalizations, setPersonalizations] = useState([]);\n\n  const handleChange = event => {\n    const updatedPersonalization = personalizations === null || personalizations === void 0 ? void 0 : personalizations.map(p => {\n      var _event$target, _event$target2;\n\n      return p.name === ((_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.name) ? { ...p,\n        value: (_event$target2 = event.target) === null || _event$target2 === void 0 ? void 0 : _event$target2.value\n      } : p;\n    });\n    setPersonalizations(updatedPersonalization);\n  };\n\n  const pushToCart = e => {\n    e.preventDefault();\n    const duplicate = cart.find(c => c.id === cartItem.id);\n\n    if (duplicate) {\n      const newCart = cart.map(c => c.id === cartItem.id ? { ...c,\n        quantity: c.quantity + 1\n      } : c);\n      updateCart(newCart);\n    } else {\n      const newCart = [...cart, { ...cartItem,\n        options: personalizations,\n        quantity: 1\n      }];\n      updateCart(newCart);\n    }\n\n    toggleModal(false);\n    toggleCart(true);\n  };\n\n  useEffect(() => {\n    setPersonalizations(getDefaultPersonalization(cartItem));\n    if (data && data.products) updateProducts(data.products);\n  }, [cartItem, data]);\n\n  const addToCart = productId => {\n    const product = data === null || data === void 0 ? void 0 : data.products.find(item => (item === null || item === void 0 ? void 0 : item.id) === productId);\n\n    if (product) {\n      setCartItem(product);\n      toggleModal(true);\n    }\n  }; // const { data, loading, error } = useQuery(getProduct,{variables:{currency}});\n  // console.log(data);\n\n\n  if (loading) return \"Loading...\";\n  if (error) return /*#__PURE__*/_jsxDEV(\"pre\", {\n    children: error.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"products-section\",\n      children: [data.products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"product\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product === null || product === void 0 ? void 0 : product.image_url,\n            alt: \"Premium-Grade Moisturizing Balm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          class: \"title\",\n          children: product === null || product === void 0 ? void 0 : product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          class: \"price\",\n          children: [currency, product === null || product === void 0 ? void 0 : product.price, \".00\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addToCart(product === null || product === void 0 ? void 0 : product.id),\n          class: \"btn\",\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)), \";\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this), \")\", /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      closeModal: () => toggleModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-item-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-5 pb-5\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"item-image\",\n              src: cartItem === null || cartItem === void 0 ? void 0 : cartItem.image_url,\n              alt: cartItem === null || cartItem === void 0 ? void 0 : cartItem.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 12\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"First, Let's personalize.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Products that you receive may vary according to your age bracket & skin type to optimize results.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: \"Personalization Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 10\n          }, this), (cartItem === null || cartItem === void 0 ? void 0 : cartItem.product_options) && (cartItem === null || cartItem === void 0 ? void 0 : cartItem.product_options.map((item, index) => {\n            var _personalizations$fin;\n\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"exampleFormControlInput1\",\n                className: \"form-label\",\n                children: item === null || item === void 0 ? void 0 : item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: item === null || item === void 0 ? void 0 : item.title,\n                className: \"form-select\",\n                \"aria-label\": \"Default select example\",\n                onChange: handleChange,\n                value: personalizations === null || personalizations === void 0 ? void 0 : (_personalizations$fin = personalizations.find(i => i.name === item.title)) === null || _personalizations$fin === void 0 ? void 0 : _personalizations$fin.value,\n                children: (item === null || item === void 0 ? void 0 : item.options) && (item === null || item === void 0 ? void 0 : item.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: option === null || option === void 0 ? void 0 : option.value,\n                  children: option === null || option === void 0 ? void 0 : option.value\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 22\n                }, this)))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 16\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 14\n            }, this);\n          }))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: pushToCart,\n          className: \"btn\",\n          children: \"Add to cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"join\",\n        href: \"https://www.instagram.com/lumin.skin/\",\n        children: \"Join the #ManCareMovement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Productionpg, \"BEfJD9A9qRdTyVV0wNCzqEy8k2E=\", false, function () {\n  return [useAppContext, useQuery];\n});\n\n_c = Productionpg;\nexport default Productionpg;\n\nvar _c;\n\n$RefreshReg$(_c, \"Productionpg\");","map":{"version":3,"sources":["C:/Users/RAY/Desktop/luminapp/src/components/Productionpg.js"],"names":["React","getProduct","useQuery","gql","Modal","useState","useEffect","useAppContext","getDefaultPersonalization","cartItem","defaultState","product_options","map","item","name","title","value","options","length","Productionpg","currency","cart","updateCart","toggleCart","updateProducts","loading","error","data","variables","showModal","toggleModal","setCartItem","personalizations","setPersonalizations","handleChange","event","updatedPersonalization","p","target","pushToCart","e","preventDefault","duplicate","find","c","id","newCart","quantity","products","addToCart","productId","product","message","image_url","price","index","i","option"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './Product.css';\r\nimport { getProduct } from './Queries/ProdQ';\r\nimport { useQuery, gql } from \"@apollo/client\";\r\nimport Modal from './Modal.js'\r\nimport { useState, useEffect} from 'react';\r\nimport { useAppContext } from '../AppContext';\r\n\r\n\r\nconst getDefaultPersonalization = (cartItem) => {\r\n  const defaultState = cartItem?.product_options?.map((item) => {\r\n    return {\r\n      name: item.title,\r\n      value: item.options?.length && item.options[0].value,\r\n    };\r\n  });\r\n  return defaultState;\r\n};\r\n\r\nexport const Productionpg = () => {\r\n  const { currency, cart, updateCart, toggleCart, updateProducts } =\r\n  useAppContext();\r\nconst { loading, error, data } = useQuery(getProduct, {\r\n  variables: { currency },\r\n});\r\n  const [showModal, toggleModal] = useState(false);\r\n  const [cartItem, setCartItem] = useState(null);\r\n  const [personalizations, setPersonalizations] = useState([]);\r\n\r\n  const handleChange = (event) => {\r\n    const updatedPersonalization = personalizations?.map((p) =>\r\n      p.name === event.target?.name ? { ...p, value: event.target?.value } : p\r\n    );\r\n    setPersonalizations(updatedPersonalization);\r\n  };\r\n\r\n\r\n  const pushToCart = (e) => {\r\n    e.preventDefault();\r\n    const duplicate = cart.find((c) => c.id === cartItem.id);\r\n    if (duplicate) {\r\n      const newCart = cart.map((c) =>\r\n        c.id === cartItem.id ? { ...c, quantity: c.quantity + 1 } : c\r\n      );\r\n\r\n      updateCart(newCart);\r\n    } else {\r\n      const newCart = [\r\n        ...cart,\r\n        { ...cartItem, options: personalizations, quantity: 1 },\r\n      ];\r\n      updateCart(newCart);\r\n    }\r\n    toggleModal(false);\r\n    toggleCart(true);\r\n  };\r\n\r\n  \r\n  useEffect(() => {\r\n    setPersonalizations(getDefaultPersonalization(cartItem));\r\n    if (data && data.products) updateProducts(data.products);\r\n  }, [cartItem, data]);\r\n\r\n  const addToCart = (productId) => {\r\n    const product = data?.products.find((item) => item?.id === productId);\r\n    if (product) {\r\n      setCartItem(product);\r\n      toggleModal(true);\r\n    }\r\n  };\r\n    // const { data, loading, error } = useQuery(getProduct,{variables:{currency}});\r\n    // console.log(data);\r\n\r\n    if (loading) return \"Loading...\";\r\n    if (error) return <pre>{error.message}</pre>\r\n    return (\r\n      <>\r\n    <section class=\"products-section\">\r\n    {data.products.map((product) => (\r\n        \r\n          <div class=\"product\" key={product.id}>\r\n              <div class=\"text-center\">\r\n                  <img src={product?.image_url} alt=\"Premium-Grade Moisturizing Balm\"/>\r\n                  </div>\r\n                  <h4 class=\"title\">{product?.title}</h4>\r\n                  <h2 class=\"price\">{currency}{product?.price}.00</h2>\r\n                  <button onClick={() => addToCart(product?.id)} class=\"btn\">Add to Cart</button>\r\n                  </div>  \r\n          \r\n       \r\n    \r\n    ))};\r\n    </section>)\r\n     <Modal show={showModal} closeModal={() => toggleModal(false)}>\r\n     <div className=\"cart-item-wrapper\">\r\n       <div>\r\n         <div className=\"text-center mb-5 pb-5\">\r\n           <img\r\n             className=\"item-image\"\r\n             src={cartItem?.image_url}\r\n             alt={cartItem?.title}\r\n           />\r\n         </div>\r\n         <h4>First, Let's personalize.</h4>\r\n         <p>\r\n           Products that you receive may vary according to your age bracket &\r\n           skin type to optimize results.\r\n         </p>\r\n         <h6>Personalization Details</h6>\r\n         {cartItem?.product_options &&\r\n           cartItem?.product_options.map((item, index) => (\r\n             <div className=\"mb-3\" key={index}>\r\n               <label\r\n                 htmlFor=\"exampleFormControlInput1\"\r\n                 className=\"form-label\"\r\n               >\r\n                 {item?.title}\r\n               </label>\r\n               <select\r\n                 name={item?.title}\r\n                 className=\"form-select\"\r\n                 aria-label=\"Default select example\"\r\n                 onChange={handleChange}\r\n                 value={\r\n                   personalizations?.find((i) => i.name === item.title)\r\n                     ?.value\r\n                 }\r\n               >\r\n                 {item?.options &&\r\n                   item?.options.map((option, index) => (\r\n                     <option value={option?.value} key={index}>\r\n                       {option?.value}\r\n                     </option>\r\n                   ))}\r\n               </select>\r\n             </div>\r\n           ))}\r\n       </div>\r\n       <button onClick={pushToCart} className=\"btn\">\r\n         Add to cart\r\n       </button>\r\n     </div>\r\n   </Modal>\r\n   <div >\r\n     <a className=\"join\"href=\"https://www.instagram.com/lumin.skin/\" >Join the #ManCareMovement</a>\r\n   \r\n\r\n   </div>\r\n </>\r\n);\r\n    \r\n}\r\nexport default Productionpg;"]},"metadata":{},"sourceType":"module"}